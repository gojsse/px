(this.webpackJsonppx=this.webpackJsonppx||[]).push([[0],{106:function(e,t,n){e.exports={cell:"Cell_cell__3JrJV",cellSelected:"Cell_cellSelected__1W3CR"}},107:function(e,t,n){e.exports={spriteList:"SpriteList_spriteList__2lyn2",spriteListRow:"SpriteList_spriteListRow__9FoYX"}},109:function(e,t,n){e.exports={spriteGrid:"SpriteEditor_spriteGrid__1q-wX",spriteGridRow:"SpriteEditor_spriteGridRow__1lQ88"}},110:function(e,t,n){e.exports={cell:"Cell_cell__23LI3",cellSelected:"Cell_cellSelected__-78BU"}},167:function(e,t,n){e.exports={row:"Sprite_row__mrC6T"}},168:function(e,t,n){e.exports={row:"Scene_row__1vFnU"}},169:function(e,t,n){e.exports={grid:"PaletteSelector_grid__1Ql-x"}},170:function(e,t,n){e.exports={sceneEditorToolbar:"SceneEditorToolbar_sceneEditorToolbar__1LfIE"}},171:function(e,t,n){e.exports={sceneEditorActionbar:"SceneEditorActionbar_sceneEditorActionbar__2bPer"}},172:function(e,t,n){e.exports={spriteEditorToolbar:"SpriteEditorToolbar_spriteEditorToolbar__1Xxxk"}},173:function(e,t,n){e.exports={spriteEditorActionbar:"SpriteEditorActionbar_spriteEditorActionbar__1kl72"}},174:function(e,t,n){e.exports={grid:"ColorSelector_grid__znBoB"}},180:function(e,t,n){},200:function(e,t){},202:function(e,t){},212:function(e,t){},214:function(e,t){},241:function(e,t){},242:function(e,t){},247:function(e,t){},249:function(e,t){},256:function(e,t){},275:function(e,t){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),l=n(54),a=n.n(l),s=(n(180),n(14)),i=n(3),o=n(37),u=n(296),d=n(11),j=n(1),p=[{name:"Dashboard",href:""},{name:"Projects",href:"/projects"}],b={activeClassName:"border-indigo-500 text-gray-900",className:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium"},f={activeClassName:"bg-indigo-50 border-indigo-500 text-indigo-700",className:"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 block pl-3 pr-4 py-2 border-l-4 text-base font-medium"},m=function(e){return Object(j.jsx)(u.a,{as:"nav",className:"bg-white shadow-sm",children:function(e){var t=e.open;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Object(j.jsxs)("div",{className:"flex justify-between h-16",children:[Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsx)("div",{className:"flex-shrink-0 flex items-center",children:Object(j.jsx)(o.b,{exact:!0,to:"/",activeClassName:"text-indigo-500",className:"text-gray-500",children:Object(j.jsx)(d.t,{className:"block h-6 w-6"})})}),Object(j.jsx)("div",{className:"hidden sm:-my-px sm:ml-6 sm:flex sm:space-x-8",children:p.map((function(e){return Object(j.jsx)(o.b,Object(i.a)(Object(i.a)({exact:!0,to:e.href},b),{},{children:e.name}),e.name)}))})]}),Object(j.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:Object(j.jsx)(o.b,{exact:!0,to:"/settings",activeClassName:"text-indigo-500",className:"text-gray-500",children:Object(j.jsx)(d.a,{className:"block h-6 w-6"})})}),Object(j.jsx)("div",{className:"-mr-2 flex items-center sm:hidden",children:Object(j.jsxs)(u.a.Button,{className:"bg-white inline-flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[Object(j.jsx)("span",{className:"sr-only",children:"Open main menu"}),t?Object(j.jsx)(d.u,{className:"block h-6 w-6","aria-hidden":"true"}):Object(j.jsx)(d.n,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})}),Object(j.jsx)(u.a.Panel,{className:"sm:hidden",children:Object(j.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[p.map((function(e){return Object(j.jsx)(o.b,Object(i.a)(Object(i.a)({exact:!0,to:e.href},f),{},{children:e.name}),e.name)})),Object(j.jsx)("div",{children:"Settings"})]})})]})}})},x=function(e){return Object(j.jsx)("div",{className:"class",children:"Dashboard..."})},h=n(16),O=n(45),v=n(19),g=n(57),w=n(72),y=function(){return Math.random().toString(36).substr(2,9)},S=["default","ff-nes","sky-high","brinstar","brinstar-2"],N=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15"],I="move",P="stamp",C="pencil",k="eraser",_="fill",E="color-sample",D={name:"new scene",height:8,width:8,spriteSheet:[[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null]]},T=[[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null]],L=new Array(128).fill(null).map((function(){return[["00","00","00","00","00","00","00","00"],["00","00","00","00","00","00","00","00"],["00","00","00","00","00","00","00","00"],["00","00","00","00","00","00","00","00"],["00","00","00","00","00","00","00","00"],["00","00","00","00","00","00","00","00"],["00","00","00","00","00","00","00","00"],["00","00","00","00","00","00","00","00"]]})),R={id:"init",name:"init",author:"init",createdDate:"date1",updatedDate:"date2",palette:"default",scenes:[Object(i.a)({},D)],sprites:L},F=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(g.a)(this,e),this.name=t,this.id="sc_".concat(y()),this.height=n,this.width=c,this.spriteSheet=null!==r&&void 0!==r?r:[[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null]]},A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(g.a)(this,e),this.spriteSheet=null!==t&&void 0!==t?t:[[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null]]}return Object(w.a)(e,[{key:"data",get:function(){return this.spriteSheet}}]),e}(),B=function(){function e(t){Object(g.a)(this,e),this.name=t,this.initializeData()}return Object(w.a)(e,[{key:"initializeData",value:function(){this.id="p_".concat(y()),this.author="sys",this.created=Date.now(),this.updated=Date.now(),this.palette=S[0],this.scenes=[Object(i.a)({},new F("init scene"))],this.sprites=new Array(256).fill(null).map((function(){return Object(v.a)((new A).data)}))}},{key:"data",get:function(){return{id:this.id,name:this.name,author:this.author,created:this.created,updated:this.updated,palette:this.palette,scenes:this.scenes,sprites:this.sprites}}}]),e}(),M=n(73),z=n(30),G=n.n(z),q=n(47),H=n(105),U=n.n(H);U.a.config({name:"PX",version:1,description:"PX application storage."});var X=U.a.createInstance({name:"".concat("PX","/projects"),storeName:"projects",description:"Your PX projects."}),J=function(){var e=Object(q.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.setItem(t.id,t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(q.a)(G.a.mark((function e(t){var n,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,X.getItem(t);case 4:c=e.sent,n=c,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n=e.t0;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(q.a)(G.a.mark((function e(t,n){var c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.setItem(t,n);case 3:return c=e.sent,e.abrupt("return",c);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(q.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.removeItem(t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",e.t0);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(q.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,X.keys();case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t=e.t0;case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(q.a)(G.a.mark((function e(){var t,n,c,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,W();case 4:n=e.sent,c=0;case 6:if(!(c<n.length)){e.next=15;break}return e.next=9,X.getItem(n[c]);case 9:(r=e.sent).key=n[c],t.push(r);case 12:c++,e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),t=e.t0;case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}(),Z=Object(M.a)({reducerPath:"allProjectsApi",tagTypes:["Posts"],baseQuery:function(e,t,n){t.signal,t.dispatch,t.getState;return Y().then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},endpoints:function(e){return{createNewProject:e.mutation({queryFn:function(e){var t=e.project;return J(t).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},invalidatesTags:["Posts"]}),getAllProjects:e.query({query:function(){},providesTags:function(e){return e?[].concat(Object(v.a)(Object.keys(e).map((function(e){return{type:"Posts",id:e.id}}))),[{type:"Posts",id:"LIST"}]):[{type:"Posts",id:"LIST"}]}}),deleteProject:e.mutation({queryFn:function(e){var t=e.projectId;return K(t).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},invalidatesTags:["Posts"]})}}}),$=Z.useCreateNewProjectMutation,ee=Z.useGetAllProjectsQuery,te=Z.useDeleteProjectMutation,ne=n(167),ce=n.n(ne),re=function(e){var t=e.sprite;return null===t&&(t=Object(v.a)(T)),Object(j.jsx)("div",{children:t.map((function(e,t){return Object(j.jsx)("div",{className:ce.a.row,children:e.map((function(e,n){return Object(j.jsx)("div",{className:"color color--".concat(null!==e&&void 0!==e?e:"none")},"".concat(t,"_").concat(n))}))},"".concat(t))}))})},le=r.a.memo(re),ae=n(168),se=n.n(ae),ie=function(e){var t=e.scene,n=e.sprites;return Object(j.jsx)("div",{className:"w-full",children:t.spriteSheet.map((function(e,t){return Object(j.jsx)("div",{className:se.a.row,children:e.map((function(e,c){var r=null===e?null:n[e.id];return Object(j.jsx)(le,{sprite:r},"".concat(t,"_").concat(c))}))},"".concat(t))}))})},oe=r.a.memo(ie),ue=n(298),de=n(297),je=function(e){var t=e.children,n=e.isOpen,r=e.setIsOpen,l=e.confirmHandler,a=e.titleText,s=e.showConfirmButton,i=void 0===s||s,o=e.confirmButtonText,u=e.showCancelButton,d=void 0===u||u,p=e.cancelButtonText,b=Object(c.useRef)(null);return Object(j.jsx)(ue.a.Root,{show:n,as:c.Fragment,children:Object(j.jsx)(de.a,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:b,onClose:function(){return r(!1)},children:Object(j.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(j.jsx)(ue.a.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(j.jsx)(de.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(j.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(j.jsx)(ue.a.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(j.jsxs)("div",{className:"inline-block align-bottom bg-white px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"mt-3 sm:mt-5",children:[Object(j.jsx)(de.a.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:null!==a&&void 0!==a?a:"Confirm"}),Object(j.jsx)("div",{className:"mt-2",children:t})]})}),Object(j.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[i&&Object(j.jsx)("button",{type:"button",className:"w-full inline-flex justify-center border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm",onClick:function(){r(!1),l()},children:null!==o&&void 0!==o?o:"Confirm"}),d&&Object(j.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",ref:b,onClick:function(){return r(!1)},children:null!==p&&void 0!==p?p:"Cancel"})]})]})})]})})})},pe="relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-2 text-1xs font-medium border border-transparent hover:text-gray-500",be="w-5 h-5 mr-2",fe=function(e){var t=e.project,n=e.onConfirmDelete,r=Object(c.useState)(!1),l=Object(h.a)(r,2),a=l[0],s=l[1],i=t.scenes[0],u=t.sprites,p="palette palette--".concat(t.palette?t.palette:"default");return Object(j.jsxs)("div",{className:"".concat(p," col-span-1 flex flex-col text-center bg-white shadow overflow-hidden divide-y divide-gray-200"),children:[Object(j.jsxs)("div",{className:"flex-1 flex flex-col",children:[Object(j.jsx)("h3",{className:"mt-6 text-gray-900 text-sm font-medium",children:t.name}),Object(j.jsxs)("dl",{className:"mt-1 flex-grow flex flex-col justify-between",children:[Object(j.jsx)("dt",{className:"sr-only",children:"Project Name"}),Object(j.jsx)("dd",{className:"text-gray-500 text-xs",children:t.id}),Object(j.jsx)("dt",{className:"sr-only",children:"ID"}),Object(j.jsx)("dd",{className:"mt-3",children:Object(j.jsx)(oe,{scene:i,sprites:u})})]})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"-mt-px flex divide-x divide-gray-200",children:[Object(j.jsx)("div",{className:"w-0 flex-1 flex",children:Object(j.jsxs)(o.b,{exact:!0,to:"/projects/".concat(t.id,"/0/0"),className:pe+" text-gray-700",children:[Object(j.jsx)(d.o,{className:be+" text-gray-700","aria-hidden":"true"}),Object(j.jsx)("span",{children:"Open"})]})}),Object(j.jsx)("div",{className:"w-0 flex-1 flex",children:Object(j.jsxs)("button",{className:pe+" text-gray-400 cursor-not-allowed",onClick:function(){return console.log("add dupe function")},children:[Object(j.jsx)(d.i,{className:be+" text-gray-400","aria-hidden":"true"}),Object(j.jsx)("span",{children:"Clone"})]})}),Object(j.jsx)("div",{className:"w-0 flex-1 flex",children:Object(j.jsxs)("button",{className:pe+" text-gray-700",onClick:function(){return s(!0)},children:[Object(j.jsx)(d.j,{className:be+" text-gray-700","aria-hidden":"true"}),Object(j.jsx)("span",{children:"Delete"})]})})]})}),Object(j.jsx)(je,{isOpen:a,setIsOpen:s,confirmHandler:function(){n(t.id),s(!1)},children:Object(j.jsx)("form",{className:"bg-white mt-5 sm:flex",children:Object(j.jsxs)("div",{className:"w-full sm:max-w-xs",children:["Are you sure you want to delete ",t.id,"?"]})})})]})},me=n(299);function xe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var he=function(e){var t=e.label,n=e.items,r=(e.onChange,Object(c.useState)(n[0])),l=Object(h.a)(r,2),a=l[0],s=l[1];return Object(c.useEffect)((function(){}),[a]),Object(j.jsxs)(me.a,{value:a,onChange:s,children:[Object(j.jsx)(me.a.Label,{className:"block text-sm font-medium text-gray-700",children:t}),Object(j.jsxs)("div",{className:"mt-1 relative",children:[Object(j.jsxs)(me.a.Button,{className:"bg-white relative w-full border border-gray-300 shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[Object(j.jsx)("span",{className:"block truncate",children:a.name}),Object(j.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:Object(j.jsx)(O.d,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),Object(j.jsx)(ue.a,{as:c.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(j.jsx)(me.a.Options,{className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:n.map((function(e){return Object(j.jsx)(me.a.Option,{className:function(e){return xe(e.active?"text-white bg-indigo-600":"text-gray-900","cursor-default select-none relative py-2 pl-3 pr-9")},value:e,children:function(t){var n=t.selected,c=t.active;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:xe(n?"font-semibold":"font-normal","block truncate"),children:e.name}),n?Object(j.jsx)("span",{className:xe(c?"text-white":"text-indigo-600","absolute inset-y-0 right-0 flex items-center pr-4"),children:Object(j.jsx)(O.a,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},e.id)}))})})]})]})},Oe=[{name:"Empty",id:"001"},{name:"Basic",id:"002"},{name:"Faces",id:"003"},{name:"Board",id:"004"}],ve=function(e){var t=ee().data,n=void 0===t?[]:t,r=$(),l=Object(h.a)(r,1)[0],a=te(),s=Object(h.a)(a,1)[0],i=Object(c.useState)(!1),o=Object(h.a)(i,2),u=o[0],d=o[1],p=Object(c.useState)(""),b=Object(h.a)(p,2),f=b[0],m=b[1],x=function(e){s({projectId:e})};return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 mb-10",children:n.map((function(e){return Object(j.jsx)(fe,{project:e,onConfirmDelete:x},e.id)}))}),Object(j.jsxs)("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",type:"button",onClick:function(){return d(!0)},children:[Object(j.jsx)(O.c,{className:"w-5 h-5 text-white mr-3","aria-hidden":"true"}),Object(j.jsx)("span",{children:"New"})]}),Object(j.jsx)(je,{isOpen:u,setIsOpen:d,confirmHandler:function(){var e=new B(f).data;l({project:e}),m("")},children:Object(j.jsx)("form",{className:"bg-white mt-5 sm:flex",children:Object(j.jsxs)("div",{className:"w-full sm:max-w-xs",children:[Object(j.jsx)("label",{htmlFor:"new-project-name",className:"block text-sm font-medium text-gray-700",children:"New Project Name"}),Object(j.jsx)("input",{name:"new-project-name",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 mb-2",type:"text",placeholder:"New Project Name",value:f,onChange:function(e){return m(e.target.value)}}),Object(j.jsx)(he,{label:"New Project Template",items:Oe,onChange:function(){console.log("changed")}})]})})})]})},ge=n(4),we=Object(M.a)({reducerPath:"currentProjectApi",tagTypes:["Posts"],baseQuery:function(e,t,n){t.signal,t.dispatch,t.getState;return Q(e).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},endpoints:function(e){return{readProjectById:e.query({query:function(e){return"".concat(e)},providesTags:function(e){return e?[].concat(Object(v.a)(Object.keys(e).map((function(e){return{type:"Posts",id:e.id}}))),[{type:"Posts",id:"LIST"}]):[{type:"Posts",id:"LIST"}]}}),updateProject:e.mutation({queryFn:function(e){var t=e.projectId,n=e.updatedProject;return V(t,Object(i.a)(Object(i.a)({},n),{},{updated:Date.now()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))}})}}}),ye=we.useReadProjectByIdQuery,Se=we.useUpdateProjectMutation,Ne=n(5),Ie=Object(i.a)({},R),Pe=Object(Ne.d)({name:"currentProject",initialState:Object(i.a)({},Ie),reducers:{setCurrentProject:function(e,t){return t.payload.project},setCurrentProjectName:function(e,t){var n=t.payload.value;e.name=n,e.updated=Date.now()},setCurrentProjectPalette:function(e,t){var n=t.payload.palette;e.palette=n,e.updated=Date.now()},updateCurrentProjectSprite:function(e,t){var n=t.payload,c=n.index,r=n.sprite;e.sprites[c]=r,e.updated=Date.now()},updateCurrentProjectScene:function(e,t){var n=t.payload,c=n.index,r=n.scene;e.scenes[c]=r,e.updated=Date.now()}}}),Ce=Pe.actions,ke=Ce.setCurrentProject,_e=(Ce.setCurrentProjectName,Ce.setCurrentProjectPalette),Ee=Ce.updateCurrentProjectSprite,De=Ce.updateCurrentProjectScene,Te=function(e){return e.currentProject},Le=function(e){return e.currentProject.name},Re=function(e){return new Date(e.currentProject.updated).toLocaleDateString("en-US")},Fe=function(e){return e.currentProject.palette},Ae=function(e){return"palette palette--".concat(e.currentProject.palette?e.currentProject.palette:"default")},Be=function(e){return e.currentProject.scenes.length},Me=function(e){return function(t){return t.currentProject.sprites[e]}},ze=Pe.reducer,Ge=n(106),qe=n.n(Ge),He=function(e){var t=e.value,n=e.isSelected,c=void 0!==n&&n,r=e.children,l=e.onClick;return Object(j.jsx)("button",{className:"color color--".concat(t," ").concat(qe.a.cell)+(c?" "+qe.a.cellSelected:""),onClick:function(){return l(t)},children:r})},Ue=n(169),Xe=n.n(Ue),Je=function(e){var t=Object(ge.d)(),n=Object(ge.e)(Fe),c=Se(),r=Object(h.a)(c,1)[0],l=function(e){t(function(e){var t=e.palette;return function(e,n){var c=Te(n());e(_e({palette:t}));var r=Object(i.a)(Object(i.a)({},c),{},{palette:t,updated:Date.now()});return Promise.resolve({projectId:c.id,updatedProject:r})}}({palette:e})).then((function(e){var t=e.projectId,n=e.updatedProject;r({projectId:t,updatedProject:n})}))};return Object(j.jsxs)("div",{className:"palette-preview",children:[Object(j.jsxs)("div",{className:"flex content-center justify-between p-2 text-xs",children:["Palette: ",n]}),Object(j.jsx)("div",{className:Xe.a.grid+" border-t border-gray-100 pt-2",children:S.map((function(e){return Object(j.jsx)(He,{value:e,isSelected:e===n,onClick:l,children:Object(j.jsx)("div",{className:"grid grid-cols-4 gap-0 w-full palette palette--".concat(e),children:N.map((function(e){return Object(j.jsx)("div",{className:"color color--".concat(e)},e)}))})},e)}))})]})},Qe={selectedTool:I,selectedScene:Object(i.a)({},D),selectedSceneIndex:0},Ve=Object(Ne.d)({name:"sceneEditor",initialState:Object(i.a)({},Qe),reducers:{setCurrentTool:function(e,t){var n=t.payload.tool;e.selectedTool=n},setCurrentScene:function(e,t){var n=t.payload.scene;e.selectedScene=n},setCurrentSceneIndex:function(e,t){var n=t.payload.sceneIndex;e.selectedSceneIndex=n},updateCurrentSceneCell:function(e,t){var n=t.payload,c=n.row,r=n.column,l=n.value;e.selectedScene.spriteSheet[c][r]=l},flipSceneHorizontal:function(e){e.selectedScene.spriteSheet.forEach((function(t,n){e.selectedScene.spriteSheet[n]=t.reverse()}))},flipSceneVertical:function(e){e.selectedScene.spriteSheet.reverse()},moveSceneLeft:function(e){e.selectedScene.spriteSheet.forEach((function(e){var t=e.shift();e.push(t)}))},moveSceneUp:function(e){var t=e.selectedScene.spriteSheet.shift();e.selectedScene.spriteSheet.push(t)},moveSceneRight:function(e){e.selectedScene.spriteSheet.forEach((function(e){var t=e.pop();e.unshift(t)}))},moveSceneDown:function(e){var t=e.selectedScene.spriteSheet.pop();e.selectedScene.spriteSheet.unshift(t)},clearSceneSprites:function(e){e.selectedScene.spriteSheet=e.selectedScene.spriteSheet.map((function(e){return e.map((function(e){return null}))}))}}}),Ke=Ve.actions,We=Ke.setCurrentTool,Ye=Ke.setCurrentScene,Ze=Ke.setCurrentSceneIndex,$e=Ke.updateCurrentSceneCell,et=Ke.flipSceneHorizontal,tt=Ke.flipSceneVertical,nt=Ke.moveSceneLeft,ct=Ke.moveSceneUp,rt=Ke.moveSceneRight,lt=Ke.moveSceneDown,at=Ke.clearSceneSprites,st=function(e){return e.sceneEditor.selectedTool},it=function(e){return e.sceneEditor.selectedScene},ot=function(e){return e.sceneEditor.selectedScene.name},ut=function(e){return e.sceneEditor.selectedSceneIndex},dt=Ve.reducer,jt=function(e){var t=e.sceneIndex,n=Object(ge.e)(st),c=Object(ge.e)(ot),r=Object(ge.e)(Be);return Object(j.jsxs)("div",{className:"flex content-center justify-between p-2 text-xs",children:[Object(j.jsxs)("span",{children:["[",parseInt(t)+1,"/",r,"] ",c]}),Object(j.jsxs)("span",{children:[n," tool"]})]})},pt=n(170),bt=n.n(pt),ft="relative inline-flex items-center px-4 py-2 text-sm font-medium",mt="".concat(ft," text-gray-800 bg-white hover:bg-gray-50"),xt="".concat(ft," text-gray-50 bg-indigo-500 hover:bg-indigo-500 focus:z-10"),ht="block h-5 w-5",Ot=function(e){var t=Object(ge.d)(),n=Object(ge.e)(st),c=[{tool:I,icon:Object(j.jsx)(d.l,{className:ht})},{tool:P,icon:Object(j.jsx)(d.b,{className:ht})}];return Object(j.jsx)("div",{className:bt.a.sceneEditorToolbar+" w-full",children:c.map((function(e){return Object(j.jsx)("button",{type:"button",className:e.tool===n?xt:mt,onClick:function(){return n=e.tool,t(We({tool:n}));var n},children:e.icon},e.tool)}))})},vt=function(e){var t=e.row,n=e.column,c=e.value;return function(e,r){var l=Te(r()),a=ut(r());e($e({row:t,column:n,value:c}));var s=it(r()),o=Object(i.a)(Object(i.a)({},l),{},{scenes:Object(v.a)(l.scenes)});return o.scenes[a]=s,Promise.resolve({projectId:l.id,updatedProject:o})}},gt=n(171),wt=n.n(gt),yt="".concat("relative inline-flex items-center px-4 py-2 text-sm font-medium"," text-gray-800 bg-white hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"),St="block h-5 w-5",Nt={type:"button",className:yt},It=function(e){var t=Object(ge.d)(),n=Se(),c=Object(h.a)(n,1)[0],r=function(e){t(function(e){return function(t,n){var c=Te(n()),r=ut(n());t(e());var l=it(n());t(De({index:r,scene:l}));var a=Object(i.a)(Object(i.a)({},c),{},{scenes:Object(v.a)(c.scenes)});return a.scenes[r]=l,Promise.resolve({projectId:c.id,updatedProject:a})}}(e)).then((function(e){var t=e.projectId,n=e.updatedProject;c({projectId:t,updatedProject:n})}))};return Object(j.jsxs)("div",{className:wt.a.sceneEditorActionbar+" mb-2 w-full",children:[Object(j.jsx)("button",Object(i.a)(Object(i.a)({},Nt),{},{onClick:function(){return r(nt)},children:Object(j.jsx)(d.d,{className:St})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},Nt),{},{onClick:function(){return r(rt)},children:Object(j.jsx)(d.e,{className:St})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},Nt),{},{onClick:function(){return r(ct)},children:Object(j.jsx)(d.f,{className:St})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},Nt),{},{onClick:function(){return r(lt)},children:Object(j.jsx)(d.c,{className:St})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},Nt),{},{onClick:function(){return r(et)},children:Object(j.jsx)(d.r,{className:St})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},Nt),{},{onClick:function(){return r(tt)},children:Object(j.jsx)(d.s,{className:St})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},Nt),{},{onClick:function(){return r(at)},children:Object(j.jsx)(d.m,{className:St})}))]})},Pt={selectedTool:C,selectedColor:N[0],selectedSprite:[],selectedSpriteIndex:0},Ct=Object(Ne.d)({name:"spriteEditor",initialState:Object(i.a)({},Pt),reducers:{setCurrentTool:function(e,t){var n=t.payload.tool;e.selectedTool=n},setCurrentColor:function(e,t){var n=t.payload.color;e.selectedColor=n},setCurrentSprite:function(e,t){var n=t.payload.sprite;e.selectedSprite=n},setCurrentSpriteIndex:function(e,t){var n=t.payload.spriteIndex;e.selectedSpriteIndex=n},flipSpriteHorizontal:function(e){e.selectedSprite.forEach((function(t,n){e.selectedSprite[n]=t.reverse()}))},flipSpriteVertical:function(e){e.selectedSprite.reverse()},moveSpriteUp:function(e){var t=e.selectedSprite.shift();e.selectedSprite.push(t)},moveSpriteRight:function(e){e.selectedSprite.forEach((function(e){var t=e.pop();e.unshift(t)}))},moveSpriteDown:function(e){var t=e.selectedSprite.pop();e.selectedSprite.unshift(t)},moveSpriteLeft:function(e){e.selectedSprite.forEach((function(e){var t=e.shift();e.push(t)}))},rotateSpriteRight:function(e){var t=e.selectedSprite.map((function(e){return Object(v.a)(e.map((function(e){return e})))}));e.selectedSprite.forEach((function(n,c){n.forEach((function(n,r){t[r][e.selectedSprite.length-c-1]=n}))})),e.selectedSprite=t},rotateSpriteLeft:function(e){var t=e.selectedSprite.map((function(e){return Object(v.a)(e.map((function(e){return e})))}));e.selectedSprite.forEach((function(n,c){n.forEach((function(n,r){t[e.selectedSprite.length-r-1][c]=n}))})),e.selectedSprite=t}}}),kt=Ct.actions,_t=kt.setCurrentTool,Et=kt.setCurrentColor,Dt=kt.setCurrentSprite,Tt=kt.setCurrentSpriteIndex,Lt=kt.flipSpriteHorizontal,Rt=kt.flipSpriteVertical,Ft=kt.moveSpriteLeft,At=kt.moveSpriteUp,Bt=kt.moveSpriteRight,Mt=kt.moveSpriteDown,zt=kt.rotateSpriteRight,Gt=kt.rotateSpriteLeft,qt=function(e){return e.spriteEditor.selectedTool},Ht=function(e){return e.spriteEditor.selectedColor},Ut=function(e){return e.spriteEditor.selectedSprite},Xt=function(e){return e.spriteEditor.selectedSpriteIndex},Jt=Ct.reducer,Qt=n(76),Vt=n.n(Qt),Kt=function(e){var t=e.spriteIndex,n=e.isSelected,c=void 0!==n&&n,r=e.isDraggable,l=void 0===r||r,a=e.onClick,s=void 0===a?function(){}:a,i=e.onDoubleClick,o=void 0===i?function(){}:i,u=e.cursor,d=void 0===u?"default":u,p=e.rowIndex,b=e.colIndex,f=Object(ge.e)(Me(t)),m=f.map((function(e,n){return Object(j.jsx)("div",{className:Vt.a.spriteRow,children:e.map((function(e,n){return Object(j.jsx)("div",{className:"color color--".concat(e),onClick:function(){return s(t)}},n)}))},n)}));return Object(j.jsx)("div",{className:Vt.a.sprite+(c?" "+Vt.a.spriteSelected:""),style:{cursor:d},draggable:l,onDragStart:function(e){var n={rowIndex:p,colIndex:b,sprite:f,spritePoolIndex:t};e.dataTransfer.setData("text/plain",JSON.stringify(n))},onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault()},onDoubleClick:o,onClick:s,children:m})},Wt=r.a.memo(Kt),Yt=function(e){var t=e.sprite,n=e.rowIndex,c=e.colIndex,r=e.selectedTool,l=Object(ge.d)(),a=Object(ge.e)(Xt),s=Se(),i=Object(h.a)(s,1)[0];return Object(j.jsx)("div",{onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var t=JSON.parse(e.dataTransfer.getData("text"));l(vt({row:n,column:c,value:{id:t.spritePoolIndex}})).then((function(e){var t=e.projectId,n=e.updatedProject;i({projectId:t,updatedProject:n})}));var r=null!==t.rowIndex&&t.rowIndex>=0,a=null!==t.colIndex&&t.colIndex>=0;r&&a&&(n===t.rowIndex&&c===t.colIndex||l(vt({row:t.rowIndex,column:t.colIndex,value:null})).then((function(e){var t=e.projectId,n=e.updatedProject;i({projectId:t,updatedProject:n})}))),e.dataTransfer.clearData()},onMouseDown:function(){r===P&&l(vt({row:n,column:c,value:{id:a}})).then((function(e){var t=e.projectId,n=e.updatedProject;i({projectId:t,updatedProject:n})}))},children:null!==t&&Object(j.jsx)(Wt,{spriteIndex:t.id,rowIndex:n,colIndex:c,cursor:function(){var e="default";return r===I?e="grab":r===P&&(e="cell"),e}(),isDraggable:r===I},t.id)})},Zt=r.a.memo(Yt),$t=n(75),en=n.n($t),tn=function(e){var t=e.scene,n=Object(ge.e)(st);return Object(j.jsx)("div",{children:t.spriteSheet.map((function(e,t){return Object(j.jsx)("div",{className:en.a.sceneGridRow,children:e.map((function(e,c){return Object(j.jsx)(Zt,{rowIndex:t,colIndex:c,sprite:e,selectedTool:n},c)}))},t)}))})},nn=function(e){var t,n=e.sceneIndex,r=Object(ge.d)(),l=Object(ge.e)((t=n,function(e){return e.currentProject.scenes[t]})),a=Object(ge.e)(it);return Object(c.useEffect)((function(){r(Ye({scene:l})),r(Ze({sceneIndex:n}))}),[r,l,n]),Object(j.jsx)("div",{className:en.a.sceneGrid+" bg-gray-100 bg-stripes bg-stripes-white mb-2",children:Object(j.jsx)(tn,{scene:a})})},cn=n(107),rn=n.n(cn),ln=function(e){var t=Object(s.f)(),n=Object(s.g)(),c=n.projectId,r=n.sceneIndex,l=Object(ge.e)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return function(n){return n.currentProject.sprites.filter((function(n,c){return c>=0&&c<=e*t-1}))}}(1,32)),a=Object(ge.e)(Xt),i=Object(ge.e)(st);return Object(j.jsx)("div",{className:rn.a.spriteList,children:Object(j.jsx)("div",{className:rn.a.spriteListRow,children:l.map((function(e,n){return Object(j.jsx)(Wt,{spriteIndex:n,cursor:"pointer",isSelected:parseInt(n)===parseInt(a),isDraggable:i===I,onClick:function(){return function(e){t.push("/projects/".concat(c,"/").concat(r,"/").concat(e))}(n)}},n)}))})})},an=n(108),sn=function(e){var t=e.spriteIndex,n=Object(ge.e)(qt);return Object(j.jsxs)("div",{className:"flex content-center justify-between p-2 text-xs",children:[Object(j.jsxs)("span",{children:["[",function(){var e=parseInt(t)+1,n=e;return e<10?n="00"+Object(an.parseString)(e):e<100&&(n="0"+Object(an.parseString)(e)),n}(),"/256]"]}),Object(j.jsxs)("span",{children:[n," tool"]})]})},on=n(172),un=n.n(on),dn="relative inline-flex items-center px-4 py-2 text-sm font-medium",jn="".concat(dn," text-gray-800 bg-white hover:bg-gray-50"),pn="".concat(dn," text-gray-50 bg-indigo-500 hover:bg-indigo-500 focus:z-10"),bn="block h-5 w-5",fn=function(e){var t=Object(ge.d)(),n=Object(ge.e)(qt),c=[{tool:C,icon:Object(j.jsx)(d.p,{className:bn})},{tool:k,icon:Object(j.jsx)(d.u,{className:bn})},{tool:_,icon:Object(j.jsx)(d.g,{className:bn})},{tool:E,icon:Object(j.jsx)(d.k,{className:bn})}];return Object(j.jsx)("div",{className:un.a.spriteEditorToolbar+" w-full",children:c.map((function(e){return Object(j.jsx)("button",{type:"button",className:e.tool===n?pn:jn,onClick:function(){return n=e.tool,t(_t({tool:n}));var n},children:e.icon},e.tool)}))})},mn=n(173),xn=n.n(mn),hn="".concat("relative inline-flex items-center px-4 py-2 text-sm font-medium"," text-gray-800 bg-white hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"),On="block h-5 w-5",vn={type:"button",className:hn},gn=function(e){var t=Object(ge.d)(),n=Se(),c=Object(h.a)(n,1)[0],r=function(e){t(function(e){return function(t,n){var c=Te(n()),r=Xt(n());t(e());var l=Ut(n());t(Ee({index:r,sprite:l}));var a=Object(i.a)(Object(i.a)({},c),{},{sprites:Object(v.a)(c.sprites)});return a.sprites[r]=l,Promise.resolve({projectId:c.id,updatedProject:a})}}(e)).then((function(e){var t=e.projectId,n=e.updatedProject;c({projectId:t,updatedProject:n})}))};return Object(j.jsxs)("div",{className:xn.a.spriteEditorActionbar+" w-full mb-2",children:[Object(j.jsx)("button",Object(i.a)(Object(i.a)({},vn),{},{onClick:function(){return r(Ft)},children:Object(j.jsx)(d.d,{className:On})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},vn),{},{onClick:function(){return r(Bt)},children:Object(j.jsx)(d.e,{className:On})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},vn),{},{onClick:function(){return r(At)},children:Object(j.jsx)(d.f,{className:On})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},vn),{},{onClick:function(){return r(Mt)},children:Object(j.jsx)(d.c,{className:On})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},vn),{},{onClick:function(){return r(Lt)},children:Object(j.jsx)(d.r,{className:On})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},vn),{},{onClick:function(){return r(Rt)},children:Object(j.jsx)(d.s,{className:On})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},vn),{},{onClick:function(){return r(Gt)},children:Object(j.jsx)(d.q,{className:On})})),Object(j.jsx)("button",Object(i.a)(Object(i.a)({},vn),{},{onClick:function(){return r(zt)},children:Object(j.jsx)(d.q,{className:On,style:{transform:"scaleX(-1)"}})}))]})},wn=function(e){var t=e.rowIndex,n=e.colIndex,c=e.colorKey,r=e.selectedTool,l=e.mouseIsDown,a=e.clickHandler,s=Object(ge.d)();return Object(j.jsx)("button",{className:"color color--".concat(c),onMouseDown:function(){r!==E?a(t,n):s(Et({color:c}))},onMouseEnter:function(){r===E&&l?s(Et({color:c})):l&&a(t,n)}})},yn=r.a.memo(wn),Sn=n(109),Nn=n.n(Sn),In=function(e){var t=e.spriteIndex,n=Object(ge.d)(),r=Object(ge.e)(Me(t)),l=Object(ge.e)(Ut),a=Object(ge.e)(qt),s=Object(ge.e)(Ht),o=Object(c.useState)(!1),u=Object(h.a)(o,2),d=u[0],p=u[1],b=Object(c.useState)([]),f=Object(h.a)(b,2),m=f[0],x=f[1],O=Se(),g=Object(h.a)(O,1)[0],w=function(e,t){var c=l.map((function(e){return Object(v.a)(e.map((function(e){return e})))}));if(a===C)c[e][t]=s;else if(a===_){var r=m[e][t];m.forEach((function(e,t){e.forEach((function(e,n){e===r&&(c[t][n]=s)}))}))}else{if(a!==k)return;c[e][t]=null}n(function(e){var t=e.sprite;return function(e,n){var c=Te(n()),r=Xt(n());e(Dt({sprite:t}));var l=Ut(n());e(Ee({index:r,sprite:l}));var a=Object(i.a)(Object(i.a)({},c),{},{sprites:Object(v.a)(c.sprites)});return a.sprites[r]=l,Promise.resolve({projectId:c.id,updatedProject:a})}}({sprite:c})).then((function(e){var t=e.projectId,n=e.updatedProject;g({projectId:t,updatedProject:n})}))},y=Object(c.useCallback)((function(){var e=[],t=[];l.forEach((function(n,c){e[c]=[],n.forEach((function(n,r){var a=r>0?l[c][r-1]:-1,s=c>0?l[c-1][r]:-1,i=r>0?e[c][r-1]:-1,o=c>0?e[c-1][r]:-1;if(n===a)if(n===s&&i!==o){var u=Math.min(i,o),d=Math.max(i,o),j=t.findIndex((function(e){return e.has(u)}));t[j].add(d),t[d]=t[j],e[c][r]=u}else e[c][r]=i;if(n!==a)if(n===s)e[c][r]=o;else{var p=new Set;p.add(t.length),t.push(p),e[c][r]=t.length-1}}))}));var n=e.map((function(e){return e.map((function(e){var n=[];return t[e].forEach((function(e){n.push(e)})),Math.min.apply(Math,n)}))}));x(n)}),[l]);Object(c.useEffect)((function(){n(Dt({sprite:r})),n(Tt({spriteIndex:t}))}),[n,r,t]),Object(c.useEffect)((function(){y()}),[y,l]);var S=l.map((function(e,t){return Object(j.jsx)("div",{className:Nn.a.spriteGridRow,children:e.map((function(e,n){return Object(j.jsx)(yn,{rowIndex:t,colIndex:n,colorKey:e,selectedColorKey:s,selectedTool:a,mouseIsDown:d,clickHandler:w},"r".concat(t,"-c").concat(n))}))},t)}));return Object(j.jsx)("div",{className:"mb-2",children:Object(j.jsx)("div",{className:Nn.a.spriteGrid,onMouseLeave:function(){d&&n(Ee({index:t,sprite:l})),p(!1)},onMouseDown:function(){return p(!0)},onMouseUp:function(){p(!1),n(Ee({index:t,sprite:l}))},children:S})})},Pn=r.a.memo(In),Cn=n(110),kn=n.n(Cn),_n=function(e){var t=e.value,n=e.isSelected,c=void 0!==n&&n,r=e.onClick;return Object(j.jsx)("button",{className:"color color--".concat(t," ").concat(kn.a.cell)+(c?" "+kn.a.cellSelected:""),onClick:function(){return r(t)}})},En=n(77),Dn=n.n(En),Tn=function(e){var t=e.selectedColor,n=e.selectedPalette,r=Object(c.useRef)(null),l=Object(c.useState)(""),a=Object(h.a)(l,2),s=a[0],i=a[1],o=Object(c.useState)(""),u=Object(h.a)(o,2),p=u[0],b=u[1],f=Object(c.useState)(!1),m=Object(h.a)(f,2),x=m[0],O=m[1];Object(c.useEffect)((function(){var e=window.getComputedStyle(r.current).backgroundColor,t=Dn()(e).hex(),n=Dn()(e).css(),c=Dn()(e).luminance();i(t),b(n),O(c<.45)}),[t,n]);var v=x?"text-white":"text-black";return Object(j.jsxs)("div",{className:"flex flex-1 items-start h-1/4 p-2 text-xs font-mono color color--".concat(t," ").concat(v),ref:r,children:[Object(j.jsx)(d.h,{className:"block h-5 w-5 mr-2"})," c",t," | ",s," | ",p]})},Ln=n(174),Rn=n.n(Ln),Fn=function(e){var t=Object(ge.d)(),n=Object(ge.e)(Ht),c=Object(ge.e)(Fe),r=function(e){t(Et({color:e}))};return Object(j.jsxs)("div",{className:"flex-1 flex flex-col",children:[Object(j.jsx)("div",{className:"bg-white",children:Object(j.jsx)("div",{className:Rn.a.grid,children:N.map((function(e,t){return Object(j.jsx)(_n,{value:e,isSelected:e===n,onClick:r},t)}))})}),Object(j.jsx)(Tn,{selectedColor:n,selectedPalette:c})]})},An=n(300),Bn=function(e){var t=Object(s.g)(),n=t.projectId,r=t.sceneIndex,l=void 0===r?0:r,a=t.spriteIndex,i=void 0===a?0:a,o=ye(n).data,u=Object(ge.d)(),d=Object(ge.e)(Le),p=Object(ge.e)(Re),b=Object(ge.e)(Ae);return Object(c.useEffect)((function(){u(ke({project:o}))}),[u,o]),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"relative mt-2 grid grid-cols-1 gap-0 mb-5",children:Object(j.jsxs)("div",{className:"bg-white shadow flex justify-between items-center",children:[Object(j.jsxs)("div",{className:"bg-gray-50 px-5 py-3",children:["NAME: ",d," / ID: ",n," / Updated: ",p]}),Object(j.jsxs)(An.a,{as:"div",className:"inline-block lg:hidden  text-left h-full",children:[Object(j.jsxs)(An.a.Button,{className:"h-full inline-flex justify-center items-center w-32 px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500",children:["Settings",Object(j.jsx)(O.b,{className:"-mr-1 ml-2 h-5 w-5","aria-hidden":"true"})]}),Object(j.jsx)(ue.a,{as:c.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(j.jsx)(An.a.Items,{className:"origin-top-right absolute right-0 mt-2 w-full shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",children:Object(j.jsx)("div",{className:"py-1",children:Object(j.jsx)("div",{className:"bg-white mb-5",children:Object(j.jsx)(Je,{})})})})})]})]})}),Object(j.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[Object(j.jsx)("div",{className:"bg-white hidden lg:block",children:Object(j.jsx)(Je,{})}),Object(j.jsxs)("div",{className:"flex flex-col bg-white ".concat(b),children:[Object(j.jsxs)("div",{className:"shadow",children:[Object(j.jsx)(jt,{sceneIndex:l}),Object(j.jsxs)("div",{className:"bg-indigo-100 bg-stripes bg-stripes-white shadow-sm border-t border-gray-100",children:[Object(j.jsx)(Ot,{}),Object(j.jsx)(It,{})]})]}),Object(j.jsx)(nn,{sceneIndex:l}),Object(j.jsx)(ln,{})]}),Object(j.jsxs)("div",{className:"flex flex-col bg-white ".concat(b),children:[Object(j.jsxs)("div",{className:"shadow",children:[Object(j.jsx)(sn,{spriteIndex:i}),Object(j.jsxs)("div",{className:"bg-indigo-100 bg-stripes bg-stripes-white shadow-sm border-t border-gray-100",children:[Object(j.jsx)(fn,{}),Object(j.jsx)(gn,{})]})]}),Object(j.jsx)(Pn,{spriteIndex:i}),Object(j.jsx)(Fn,{})]})]})]})},Mn=function(e){return Object(j.jsx)("div",{className:"class",children:"Settings..."})},zn=(n(293),n(294),[{path:"/projects/:projectId/:sceneIndex/:spriteIndex",component:Bn},{path:"/projects",component:ve},{path:"/settings",component:Mn},{path:"/",component:x}]);var Gn,qn=function(){return Object(j.jsx)("div",{className:"App bg-gradient-to-r from-gray-200 via-gray-100 to-gray-300",children:Object(j.jsxs)("div",{className:"min-h-screen",children:[Object(j.jsx)(m,{}),Object(j.jsx)("div",{className:"py-10",children:Object(j.jsx)("main",{children:Object(j.jsx)("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:Object(j.jsx)("div",{className:"px-4 sm:px-0",children:Object(j.jsx)(s.c,{children:zn.map((function(e){return Object(j.jsx)(s.a,{path:e.path,component:e.component},e.path)}))})})})})})]})})},Hn=n(38),Un=n(25),Xn=n(175),Jn=n.n(Xn),Qn=Object(Ne.d)({name:"projects",initialState:[],reducers:{setProjects:function(e,t){var n=t.payload.projects;return Object(v.a)(n)},updateProject:function(e,t){var n=t.payload.project,c=e.findIndex((function(e){return e.id===n.id}));c>-1&&(e[c]=n)},setProjectPalette:function(e,t){var n=t.payload,c=n.projectId,r=n.value,l=e.findIndex((function(e){return e.id===c}));l>-1&&(e[l].palette=r)},insertProjectScene:function(e,t){var n=t.payload.projectId,c=e.findIndex((function(e){return e.id===n}));c>-1&&e[c].scenes.push(Object(i.a)({},new F("Empty Init Scene")))},updateProjectScene:function(e,t){var n=t.payload,c=n.projectId,r=n.sceneIndex,l=n.scene,a=e.findIndex((function(e){return e.id===c}));a>-1&&(e[a].scenes[r]=l)},updateProjectSprite:function(e,t){},createNewProject:function(e,t){var n=t.payload.project;e.push(n)},deleteProject:function(e,t){var n=t.payload.projectId,c=e.findIndex((function(e){return e.id===n}));e.splice(c,1)},cloneProject:function(e,t){}}}),Vn=Qn.actions,Kn=(Vn.setProjects,Vn.updateProject,Vn.updateProjectSprite,Vn.updateProjectScene,Vn.insertProjectScene,Vn.setProjectPalette,Vn.createNewProject,Vn.deleteProject,Vn.cloneProject,Qn.reducer),Wn=Object(Ne.a)({middleware:function(e){return e().concat(Jn.a).concat(Z.middleware).concat(we.middleware)},reducer:(Gn={},Object(Hn.a)(Gn,Z.reducerPath,Z.reducer),Object(Hn.a)(Gn,we.reducerPath,we.reducer),Object(Hn.a)(Gn,"projects",Kn),Object(Hn.a)(Gn,"currentProject",ze),Object(Hn.a)(Gn,"sceneEditor",dt),Object(Hn.a)(Gn,"spriteEditor",Jt),Gn)});Object(Un.d)(Wn.dispatch);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(ge.a,{store:Wn,children:Object(j.jsx)(o.a,{children:Object(j.jsx)(qn,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},75:function(e,t,n){e.exports={sceneGrid:"SceneEditor_sceneGrid__2enL9",sceneGridRow:"SceneEditor_sceneGridRow__oE_Hy"}},76:function(e,t,n){e.exports={sprite:"Sprite_sprite__2NRZ1",spriteSelected:"Sprite_spriteSelected__1703B",spriteRow:"Sprite_spriteRow__3VFP1"}}},[[295,1,2]]]);
//# sourceMappingURL=main.4b9e8ed3.chunk.js.map